<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xBrush 동영상 광고 제작</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="AI 기반 동영상 광고 제작 플랫폼 - xBrush로 전문적인 광고 영상을 쉽고 빠르게 제작하세요">
    <meta name="keywords" content="AI 동영상 제작, 광고 영상, 비디오 마케팅, xBrush">
    <meta name="author" content="xBrush">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="xBrush 동영상 광고 제작">
    <meta property="og:description" content="AI 기반 동영상 광고 제작 플랫폼">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://xbrush.ai">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <div class="container">
        <!-- Progress Navigation -->
        <nav class="progress-nav" role="navigation" aria-label="제작 단계 진행률">
            <div class="progress-steps" id="progress-steps">
                <div class="progress-line">
                    <div class="progress-line-active" id="progressLine" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                
                <button class="step active" data-step="1" type="button" aria-label="1단계: 출연자 선택">
                    <div class="step-number">1</div>
                    <div class="step-label">출연자 선택</div>
                </button>
                
                <button class="step" data-step="2" type="button" aria-label="2단계: 기본 정보">
                    <div class="step-number">2</div>
                    <div class="step-label">기본 정보</div>
                </button>
                
                <button class="step" data-step="3" type="button" aria-label="3단계: 형식 선택">
                    <div class="step-number">3</div>
                    <div class="step-label">형식 선택</div>
                </button>
                
                <button class="step" data-step="4" type="button" aria-label="4단계: 스타일 선택">
                    <div class="step-number">4</div>
                    <div class="step-label">스타일 선택</div>
                </button>
                
                <button class="step" data-step="5" type="button" aria-label="5단계: 시나리오 확인">
                    <div class="step-number">5</div>
                    <div class="step-label">시나리오 확인</div>
                </button>
                
                <button class="step" data-step="6" type="button" aria-label="6단계: 영상 제작">
                    <div class="step-number">6</div>
                    <div class="step-label">영상 제작</div>
                </button>
                
                <button class="step" data-step="7" type="button" aria-label="7단계: 결과 확인">
                    <div class="step-number">7</div>
                    <div class="step-label">결과 확인</div>
                </button>
                
                <button class="step" data-step="8" type="button" aria-label="8단계: 영상 컷 선택">
                    <div class="step-number">8</div>
                    <div class="step-label">컷 선택</div>
                </button>
            </div>
        </nav>

        <!-- AI Model CTA Banner -->
        <div class="cta-banner cta-banner-gradient-blue" onclick="applyAsModel()" role="button" tabindex="0"
             onkeydown="if(event.key==='Enter') applyAsModel()" aria-label="AI 모델 신청하기"
             style="margin-bottom: 32px;">
            <div class="shine"></div>
            <div class="cta-content">
                <h3>💰 AI 모델 신청하고 수익 창출하기</h3>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Step 1: Model Selection -->
            <section class="step-content active" id="step1">
                <div class="progress-indicator">
                    <div class="progress-text">1/8 단계 - 출연자 선택</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 12.5%"></div>
                    </div>
                </div>
                
                <h1 class="heading">출연자를 선택해주세요</h1>
                <p class="mb-4">광고에 출연할 모델을 선택하세요. 각 모델은 일관된 외모로 영상에 등장합니다.</p>
                
                <!-- Virtual Models Section -->
                <section class="mb-4">
                    <header class="flex items-center mb-2">
                        <h2 class="subheading mb-0 mr-3">AI 버츄얼 모델</h2>
                        <span class="badge badge-free">무료</span>
                    </header>
                    <p class="description mb-2">AI로 생성된 가상의 모델들입니다. 무제한 사용 가능합니다.</p>
                    
                    <div class="card-grid">
                        <div class="card" onclick="selectModel(this, 'virtual1', 'free')" role="button" tabindex="0" 
                             onkeydown="if(event.key==='Enter') selectModel(this, 'virtual1', 'free')"
                             aria-label="젊은 여성 모델 선택">
                            <div class="model-image" data-model="virtual1">
                                <div class="badge">FREE</div>
                            </div>
                            <h3>젊은 여성 모델</h3>
                            <p>20대, 친근하고 활발한 이미지</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'virtual2', 'free')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'virtual2', 'free')"
                             aria-label="성숙한 남성 모델 선택">
                            <div class="model-image" data-model="virtual2">
                                <div class="badge">FREE</div>
                            </div>
                            <h3>성숙한 남성 모델</h3>
                            <p>30대, 신뢰감 있는 전문적 이미지</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'virtual3', 'free')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'virtual3', 'free')"
                             aria-label="중년 여성 모델 선택">
                            <div class="model-image" data-model="virtual3">
                                <div class="badge">FREE</div>
                            </div>
                            <h3>중년 여성 모델</h3>
                            <p>40대, 안정감 있는 프리미엄 이미지</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'virtual4', 'free')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'virtual4', 'free')"
                             aria-label="젊은 남성 모델 선택">
                            <div class="model-image" data-model="virtual4">
                                <div class="badge">FREE</div>
                            </div>
                            <h3>젊은 남성 모델</h3>
                            <p>20대, 역동적이고 트렌디한 이미지</p>
                        </div>
                    </div>
                </section>

                <!-- Premium Actors Section -->
                <section>
                    <header class="flex items-center mb-2">
                        <h2 class="subheading mb-0 mr-3">실제 배우</h2>
                        <span class="badge badge-premium">+100 크레딧!</span>
                    </header>
                    <p class="description mb-2">실제 배우들의 딥페이크 기술을 활용한 프리미엄 모델입니다. 더욱 자연스럽고 전문적인 광고 제작이 가능합니다.</p>
                    
                    <div class="card-grid">
                        <div class="card" onclick="selectModel(this, 'actor1', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor1', 'premium')"
                             aria-label="채연 모델 선택">
                            <div class="model-image" data-model="actor1">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>채연</h3>
                            <p>상큼한 20대 채연의 모습 그대로</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'actor2', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor2', 'premium')"
                             aria-label="이상아 모델 선택">
                            <div class="model-image" data-model="actor2">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>이상아</h3>
                            <p>밝고 친근한 국민적 매력</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'actor3', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor3', 'premium')"
                             aria-label="이정재 모델 선택">
                            <div class="model-image" data-model="actor3">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>이정재</h3>
                            <p>카리스마 있고 믿음직한 리더십</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'actor4', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor4', 'premium')"
                             aria-label="전지현 모델 선택">
                            <div class="model-image" data-model="actor4">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>전지현</h3>
                            <p>우아하고 세련된 여성 매력</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'actor5', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor5', 'premium')"
                             aria-label="박서준 모델 선택">
                            <div class="model-image" data-model="actor5">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>박서준</h3>
                            <p>젊고 역동적인 현대적 매력</p>
                        </div>
                        
                        <div class="card" onclick="selectModel(this, 'actor6', 'premium')" role="button" tabindex="0"
                             onkeydown="if(event.key==='Enter') selectModel(this, 'actor6', 'premium')"
                             aria-label="손예진 모델 선택">
                            <div class="model-image" data-model="actor6">
                                <div class="badge premium-badge">100💎</div>
                            </div>
                            <h3>손예진</h3>
                            <p>로맨틱하고 품격 있는 매력</p>
                        </div>
                    </div>
                </section>
                
                <div class="action-buttons">
                    <div></div>
                    <button class="btn btn-primary" id="step1Next" onclick="nextStep()" disabled 
                            aria-label="다음 단계로 이동">다음 단계</button>
                </div>
            </section>

            <!-- Step 2: Basic Information -->
            <section class="step-content" id="step2">
                <div class="progress-indicator">
                    <div class="progress-text">2/8 단계 - 기본 정보 입력</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%"></div>
                    </div>
                </div>
                
                <h1 class="heading">광고할 제품/서비스 정보</h1>
                <p class="mb-3">AI가 최적의 광고 시나리오를 생성하기 위한 기본 정보를 입력해주세요.</p>
                
                <div class="form-group">
                    <label class="form-label" for="productName">제품/서비스명 *</label>
                    <input type="text" class="form-input" id="productName" 
                           placeholder="예: 신선한 유기농 사과, 온라인 영어 강의 등"
                           aria-required="true">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="targetAudience">타겟층 *</label>
                    <select class="form-select" id="targetAudience" aria-required="true">
                        <option value="">선택해주세요</option>
                        <option value="teens">10대 (13-19세)</option>
                        <option value="twenties">20대 (20-29세)</option>
                        <option value="thirties">30대 (30-39세)</option>
                        <option value="forties">40대 (40-49세)</option>
                        <option value="fifties">50대 이상</option>
                        <option value="all">전 연령대</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="coreMessage">핵심 메시지 *</label>
                    <input type="text" class="form-input" id="coreMessage" 
                           placeholder="예: 세상에서 가장 맛있는 사과입니다"
                           aria-required="true">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="tone">광고 톤앤매너 *</label>
                    <select class="form-select" id="tone" aria-required="true">
                        <option value="">선택해주세요</option>
                        <option value="serious">진지하고 전문적인</option>
                        <option value="friendly">친근하고 유쾌한</option>
                        <option value="luxury">고급스럽고 세련된</option>
                        <option value="energetic">역동적이고 활기찬</option>
                        <option value="warm">따뜻하고 감성적인</option>
                    </select>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevStep()" aria-label="이전 단계로 이동">이전 단계</button>
                    <button class="btn btn-primary" id="step2Next" onclick="nextStep()" disabled 
                            aria-label="다음 단계로 이동">다음 단계</button>
                </div>
            </section>

            <!-- Continue with remaining steps following the same pattern... -->
            <!-- For brevity, I'll include the essential sections and skip the repetitive parts -->
            
            <!-- Step 3: Format Selection -->
            <section class="step-content" id="step3">
                <div class="progress-indicator">
                    <div class="progress-text">3/8 단계 - 영상 형식 선택</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 37.5%"></div>
                    </div>
                </div>
                
                <h1 class="heading">영상 형식을 선택해주세요</h1>
                <p class="mb-3">어떤 플랫폼에서 사용할 광고인지 선택하시면 최적화된 형식으로 제작됩니다.</p>
                
                <h2 class="subheading">플랫폼별 포맷</h2>
                <div class="card-grid">
                    <div class="card" onclick="selectFormat(this, 'youtube')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectFormat(this, 'youtube')"
                         aria-label="유튜브 광고 형식 선택">
                        <div class="platform-preview platform-youtube">YouTube</div>
                        <h3>유튜브 광고</h3>
                        <p>16:9 비율, 스킵 가능한 광고</p>
                    </div>
                    
                    <div class="card" onclick="selectFormat(this, 'instagram')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectFormat(this, 'instagram')"
                         aria-label="인스타그램 피드 형식 선택">
                        <div class="platform-preview platform-instagram">Instagram</div>
                        <h3>인스타그램 피드</h3>
                        <p>1:1 정사각형 비율</p>
                    </div>
                    
                    <div class="card" onclick="selectFormat(this, 'reels')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectFormat(this, 'reels')"
                         aria-label="인스타그램 릴스 형식 선택">
                        <div class="platform-preview platform-reels">Reels</div>
                        <h3>인스타그램 릴스</h3>
                        <p>9:16 세로 비율</p>
                    </div>
                    
                    <div class="card" onclick="selectFormat(this, 'shorts')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectFormat(this, 'shorts')"
                         aria-label="유튜브 쇼츠 형식 선택">
                        <div class="platform-preview platform-shorts">Shorts</div>
                        <h3>유튜브 쇼츠</h3>
                        <p>9:16 세로 비율</p>
                    </div>
                </div>
                
                <h2 class="subheading mt-4">영상 길이</h2>
                <div class="duration-grid">
                    <div class="card duration-card" onclick="selectDuration(this, '10')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectDuration(this, '10')"
                         aria-label="10초 길이 선택">
                        <h3>10초</h3>
                        <p>짧고 임팩트 있는 메시지</p>
                    </div>
                    
                    <div class="card duration-card" onclick="selectDuration(this, '15')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectDuration(this, '15')"
                         aria-label="15초 길이 선택">
                        <h3>15초</h3>
                        <p>스토리가 있는 광고</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevStep()" aria-label="이전 단계로 이동">이전 단계</button>
                    <button class="btn btn-primary" id="step3Next" onclick="nextStep()" disabled 
                            aria-label="다음 단계로 이동">다음 단계</button>
                </div>
            </section>

            <!-- Step 4: Style Selection -->
            <section class="step-content" id="step4">
                <div class="progress-indicator">
                    <div class="progress-text">4/8 단계 - 영상 스타일 선택</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 50%"></div>
                    </div>
                </div>
                
                <h1 class="heading">영상 스타일을 선택해주세요</h1>
                <p class="mb-3">영화 장르별 고유한 영상 문법을 적용하여 전문적인 광고를 제작합니다.</p>
                
                <div class="card-grid">
                    <div class="card style-card" onclick="selectStyle(this, 'action')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectStyle(this, 'action')"
                         aria-label="액션 스타일 선택">
                        <div class="style-preview" style="background-image: url('https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/11.png'); background-size: cover; background-position: center;">
                        </div>
                        <h3>액션 스타일</h3>
                        <p>빠른 편집, 강렬한 움직임, 역동적인 카메라 워크</p>
                    </div>
                    
                    <div class="card style-card" onclick="selectStyle(this, 'romance')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectStyle(this, 'romance')"
                         aria-label="멜로드라마 스타일 선택">
                        <div class="style-preview" style="background-image: url('https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/12.png'); background-size: cover; background-position: center;">
                        </div>
                        <h3>멜로드라마 스타일</h3>
                        <p>부드러운 전환, 클로즈업, 감성적 분위기</p>
                    </div>
                    
                    <div class="card style-card" onclick="selectStyle(this, 'thriller')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectStyle(this, 'thriller')"
                         aria-label="스릴러 스타일 선택">
                        <div class="style-preview" style="background-image: url('https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/13.png'); background-size: cover; background-position: center;">
                        </div>
                        <h3>스릴러 스타일</h3>
                        <p>긴장감, 앵글 변화, 미스터리한 분위기</p>
                    </div>
                    
                    <div class="card style-card" onclick="selectStyle(this, 'comedy')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectStyle(this, 'comedy')"
                         aria-label="코미디 스타일 선택">
                        <div class="style-preview" style="background-image: url('https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/14.png'); background-size: cover; background-position: center;">
                        </div>
                        <h3>코미디 스타일</h3>
                        <p>경쾌한 리듬, 유머러스한 구성, 밝은 분위기</p>
                    </div>
                    
                    <div class="card style-card" onclick="selectStyle(this, 'documentary')" role="button" tabindex="0"
                         onkeydown="if(event.key==='Enter') selectStyle(this, 'documentary')"
                         aria-label="다큐멘터리 스타일 선택">
                        <div class="style-preview" style="background-image: url('https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/15.png'); background-size: cover; background-position: center;">
                        </div>
                        <h3>다큐멘터리 스타일</h3>
                        <p>안정적 카메라, 현실적 톤, 신뢰감 있는 분위기</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevStep()" aria-label="이전 단계로 이동">이전 단계</button>
                    <button class="btn btn-primary" id="step4Next" onclick="nextStep()" disabled 
                            aria-label="다음 단계로 이동">다음 단계</button>
                </div>
            </section>

            <!-- Step 5: Scenario Review -->
            <section class="step-content" id="step5">
                <div class="progress-indicator">
                    <div class="progress-text">5/8 단계 - 시나리오 확인</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 62.5%"></div>
                    </div>
                </div>
                
                <h1 class="heading">🎬 AI가 생성한 시나리오를 확인해주세요</h1>
                <p class="mb-3">선택하신 정보를 바탕으로 최적화된 광고 시나리오를 생성했습니다. 그대로 사용하시거나 수정하실 수 있습니다.</p>
                
                <!-- Generated Scenario -->
                <div class="scenario-section">
                    <div class="flex items-center mb-2">
                        <h3 class="mb-0 mr-3">📝 생성된 시나리오</h3>
                        <span class="badge-free">AI 추천</span>
                    </div>
                    
                    <div class="scenario-content">
                        <div class="scenario-grid">
                            <div>
                                <strong>🎭 장면 1 (0-5초)</strong>
                                <p class="scenario-description">오프닝</p>
                            </div>
                            <div>
                                <div id="scene1Text">
                                    매력적인 모델이 화면에 등장하며 밝은 미소를 지으며 제품을 소개합니다. "안녕하세요! 오늘 특별한 제품을 소개해드릴게요."
                                </div>
                            </div>
                        </div>
                        
                        <div class="scenario-grid">
                            <div>
                                <strong>🏷️ 장면 2 (5-10초)</strong>
                                <p class="scenario-description">제품 소개</p>
                            </div>
                            <div>
                                <div id="scene2Text">
                                    제품의 핵심 기능과 장점을 강조하며 실제 사용 모습을 보여줍니다. "이 제품의 놀라운 효과를 직접 확인해보세요!"
                                </div>
                            </div>
                        </div>
                        
                        <div class="scenario-grid">
                            <div>
                                <strong>✨ 장면 3 (10-15초)</strong>
                                <p class="scenario-description">마무리</p>
                            </div>
                            <div>
                                <div id="scene3Text">
                                    강력한 콜투액션과 함께 제품명을 다시 한번 강조합니다. "지금 바로 구매하고 특별한 혜택을 받아보세요!"
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Scenario Options -->
                    <div class="flex gap-3 justify-between">
                        <div class="flex gap-3">
                            <button class="btn btn-outline" onclick="modifyScenario()" aria-label="시나리오 부분 수정">
                                ✏️ 부분 수정
                            </button>
                            <button class="btn btn-outline" onclick="replaceScenario()" style="border-color: #ed8936; color: #ed8936;" 
                                    aria-label="시나리오 전면 교체">
                                🔄 전면 교체
                            </button>
                        </div>
                        <button class="btn btn-primary" onclick="approveScenario()" aria-label="시나리오 승인">
                            👍 이 시나리오로 진행
                        </button>
                    </div>
                </div>
                
                <!-- Edit Mode (Hidden) -->
                <div id="editMode" class="edit-mode hidden">
                    <h3 class="mb-2">✏️ 시나리오 수정</h3>
                    
                    <div class="form-group">
                        <label class="form-label" for="editScene1">장면 1 (오프닝):</label>
                        <textarea id="editScene1" class="form-input" rows="2" style="resize: vertical;">매력적인 모델이 화면에 등장하며 밝은 미소를 지으며 제품을 소개합니다. "안녕하세요! 오늘 특별한 제품을 소개해드릴게요."</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="editScene2">장면 2 (제품 소개):</label>
                        <textarea id="editScene2" class="form-input" rows="2" style="resize: vertical;">제품의 핵심 기능과 장점을 강조하며 실제 사용 모습을 보여줍니다. "이 제품의 놀라운 효과를 직접 확인해보세요!"</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="editScene3">장면 3 (마무리):</label>
                        <textarea id="editScene3" class="form-input" rows="2" style="resize: vertical;">강력한 콜투액션과 함께 제품명을 다시 한번 강조합니다. "지금 바로 구매하고 특별한 혜택을 받아보세요!"</textarea>
                    </div>
                    
                    <div class="flex gap-3">
                        <button class="btn btn-outline" onclick="cancelEdit()" aria-label="수정 취소">취소</button>
                        <button class="btn btn-primary" onclick="saveEdit()" aria-label="수정 완료">수정 완료</button>
                    </div>
                </div>
                
                <!-- Replace Mode (Hidden) -->
                <div id="replaceMode" class="replace-mode hidden">
                    <div class="flex items-center mb-2">
                        <h3 class="mb-0 mr-3">🔄 시나리오 전면 교체</h3>
                        <span class="cost-badge medium">5 토큰 소모</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="newScenarioRequest">새로운 시나리오 요청사항:</label>
                        <textarea id="newScenarioRequest" class="form-input" rows="3" 
                                placeholder="예: 더 감성적이고 따뜻한 느낌으로, 가족 중심의 메시지로 변경해주세요"></textarea>
                    </div>
                    
                    <div class="flex gap-3">
                        <button class="btn btn-outline" onclick="cancelReplace()" aria-label="교체 취소">취소</button>
                        <button class="btn btn-primary" onclick="generateNewScenario()" aria-label="새 시나리오 생성">새 시나리오 생성 (5 토큰)</button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="prevStep()" aria-label="이전 단계로 이동">이전 단계</button>
                    <button class="btn btn-primary hidden" id="step5Next" onclick="nextStep()" 
                            aria-label="시나리오 승인하고 다음 단계">시나리오 승인하고 다음 단계</button>
                </div>
            </section>

            <!-- Step 6: Video Creation -->
            <section class="step-content" id="step6">
                <div class="progress-indicator">
                    <div class="progress-text">6/8 단계 - 영상 제작</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                </div>
                
                <p class="mb-4">선택하신 시나리오와 이미지로 AI가 최고 품질의 영상을 제작하고 있습니다.</p>
                
                <!-- Video Creation Progress -->
                <div id="videoCreationProgress" class="video-creation-progress">
                    <div class="text-center">
                        <div style="font-size: 64px; margin-bottom: 16px;">🎬</div>
                        <h2 class="mb-2">영상 제작 중...</h2>
                        <p class="mb-3">AI가 최고 품질의 영상을 제작하고 있습니다. 잠시만 기다려주세요.</p>
                        
                        <div class="progress-container">
                            <div class="flex justify-between items-center mb-1">
                                <span style="font-weight: 500;">진행 상황</span>
                                <span id="progressPercentage">15%</span>
                            </div>
                            <div class="progress-bar">
                                <div id="progressBar" class="progress-fill" style="width: 15%; background: linear-gradient(90deg, #38a169, #48bb78);"></div>
                            </div>
                            <div style="margin-top: 8px; font-size: 14px; color: #718096;" id="progressStatus">시나리오 분석 중...</div>
                        </div>
                        
                        <div style="font-size: 14px; color: #718096;">
                            예상 완료 시간: <strong>약 3-5분</strong>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons" id="step6Actions">
                    <button class="btn btn-outline" onclick="prevStep()" aria-label="이전 단계로 이동">이전 단계</button>
                    <button class="btn btn-primary hidden" id="step6Next" onclick="nextStep()" 
                            aria-label="다음 단계로 이동">다음 단계</button>
                </div>
                
                <!-- Image Preview Section (Hidden) -->
                <div id="imagePreviewSection" class="hidden">
                    <h2 class="mb-3">🖼️ 이미지 시안을 선택해주세요</h2>
                    <p class="mb-3">각 컷별로 4개의 시안 중 마음에 드는 이미지를 선택하세요. 선택된 이미지들로 최종 영상이 제작됩니다.</p>
                    
                    <div class="subheading">컷 1: 오프닝 장면</div>
                    <div class="cut-selection-container">
                        <div class="cut-option-toggle">
                            <label class="option-toggle-label">
                                <input type="radio" name="cut1Mode" value="new" checked onchange="toggleCutMode('cut1', 'new')">
                                <span>새 이미지 선택</span>
                            </label>
                            <label class="option-toggle-label">
                                <input type="radio" name="cut1Mode" value="keep" onchange="toggleCutMode('cut1', 'keep')">
                                <span>🔒 원본 컷 유지</span>
                            </label>
                        </div>
                        <div class="image-selection-area" id="cut1Selection">
                            <div class="image-grid" data-cut-section="cut1">
                                <div class="image-option" onclick="selectImage(this, 'cut1', 'img1')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut1', 'img1')"
                                     aria-label="컷 1 이미지 1 선택">
                                    <img src="https://picsum.photos/400/225?random=1" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 1-1">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut1', 'img2')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut1', 'img2')"
                                     aria-label="컷 1 이미지 2 선택">
                                    <img src="https://picsum.photos/400/225?random=2" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 1-2">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut1', 'img3')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut1', 'img3')"
                                     aria-label="컷 1 이미지 3 선택">
                                    <img src="https://picsum.photos/400/225?random=3" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 1-3">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut1', 'img4')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut1', 'img4')"
                                     aria-label="컷 1 이미지 4 선택">
                                    <img src="https://picsum.photos/400/225?random=4" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 1-4">
                                </div>
                            </div>
                            <button class="btn btn-outline mt-1" onclick="regenerateImages('cut1')" 
                                    aria-label="컷 1 이미지 다시 생성">이 컷 다시 생성 (3 토큰)</button>
                        </div>
                        <div class="original-cut-info" id="cut1OriginalInfo" style="display: none;">
                            <div class="original-cut-message">
                                <span class="original-cut-icon">🔒</span>
                                <span>원본 컷을 유지합니다. 비용이 발생하지 않습니다.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="subheading mt-4">컷 2: 제품 소개</div>
                    <div class="cut-selection-container">
                        <div class="cut-option-toggle">
                            <label class="option-toggle-label">
                                <input type="radio" name="cut2Mode" value="new" checked onchange="toggleCutMode('cut2', 'new')">
                                <span>새 이미지 선택</span>
                            </label>
                            <label class="option-toggle-label">
                                <input type="radio" name="cut2Mode" value="keep" onchange="toggleCutMode('cut2', 'keep')">
                                <span>🔒 원본 컷 유지</span>
                            </label>
                        </div>
                        <div class="image-selection-area" id="cut2Selection">
                            <div class="image-grid" data-cut-section="cut2">
                                <div class="image-option" onclick="selectImage(this, 'cut2', 'img1')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut2', 'img1')"
                                     aria-label="컷 2 이미지 1 선택">
                                    <img src="https://picsum.photos/400/225?random=5" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 2-1">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut2', 'img2')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut2', 'img2')"
                                     aria-label="컷 2 이미지 2 선택">
                                    <img src="https://picsum.photos/400/225?random=6" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 2-2">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut2', 'img3')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut2', 'img3')"
                                     aria-label="컷 2 이미지 3 선택">
                                    <img src="https://picsum.photos/400/225?random=7" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 2-3">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut2', 'img4')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut2', 'img4')"
                                     aria-label="컷 2 이미지 4 선택">
                                    <img src="https://picsum.photos/400/225?random=8" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 2-4">
                                </div>
                            </div>
                            <button class="btn btn-outline mt-1" onclick="regenerateImages('cut2')" 
                                    aria-label="컷 2 이미지 다시 생성">이 컷 다시 생성 (3 토큰)</button>
                        </div>
                        <div class="original-cut-info" id="cut2OriginalInfo" style="display: none;">
                            <div class="original-cut-message">
                                <span class="original-cut-icon">🔒</span>
                                <span>원본 컷을 유지합니다. 비용이 발생하지 않습니다.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="subheading mt-4">컷 3: 마무리 장면</div>
                    <div class="cut-selection-container">
                        <div class="cut-option-toggle">
                            <label class="option-toggle-label">
                                <input type="radio" name="cut3Mode" value="new" checked onchange="toggleCutMode('cut3', 'new')">
                                <span>새 이미지 선택</span>
                            </label>
                            <label class="option-toggle-label">
                                <input type="radio" name="cut3Mode" value="keep" onchange="toggleCutMode('cut3', 'keep')">
                                <span>🔒 원본 컷 유지</span>
                            </label>
                        </div>
                        <div class="image-selection-area" id="cut3Selection">
                            <div class="image-grid" data-cut-section="cut3">
                                <div class="image-option" onclick="selectImage(this, 'cut3', 'img1')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut3', 'img1')"
                                     aria-label="컷 3 이미지 1 선택">
                                    <img src="https://picsum.photos/400/225?random=9" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 3-1">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut3', 'img2')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut3', 'img2')"
                                     aria-label="컷 3 이미지 2 선택">
                                    <img src="https://picsum.photos/400/225?random=10" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 3-2">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut3', 'img3')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut3', 'img3')"
                                     aria-label="컷 3 이미지 3 선택">
                                    <img src="https://picsum.photos/400/225?random=11" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 3-3">
                                </div>
                                <div class="image-option" onclick="selectImage(this, 'cut3', 'img4')" role="button" tabindex="0"
                                     onkeydown="if(event.key==='Enter') selectImage(this, 'cut3', 'img4')"
                                     aria-label="컷 3 이미지 4 선택">
                                    <img src="https://picsum.photos/400/225?random=12" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="시안 3-4">
                                </div>
                            </div>
                            <button class="btn btn-outline mt-1" onclick="regenerateImages('cut3')" 
                                    aria-label="컷 3 이미지 다시 생성">이 컷 다시 생성 (3 토큰)</button>
                        </div>
                        <div class="original-cut-info" id="cut3OriginalInfo" style="display: none;">
                            <div class="original-cut-message">
                                <span class="original-cut-icon">🔒</span>
                                <span>원본 컷을 유지합니다. 비용이 발생하지 않습니다.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-outline" onclick="backToVideoOptions()" 
                                aria-label="이전으로 돌아가기">이전으로</button>
                        <button class="btn btn-primary" id="step6ImageNext" onclick="proceedToVideoCutSelection()" disabled 
                                aria-label="선택된 이미지로 영상 컷 생성">선택된 이미지로 영상 컷 생성</button>
                    </div>
                </div>
            </section>
            
            <!-- Step 7: Results -->
            <section class="step-content" id="step7">
                <div class="progress-indicator">
                    <div class="progress-text">7/8 단계 - 결과 확인</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 87.5%"></div>
                    </div>
                </div>
                
                <h1 class="heading">🎉 광고 영상이 완성되었습니다!</h1>
                <p class="mb-4">xBrush AI가 제작한 당신만의 전문 광고 영상을 확인해보세요.</p>
                
                <div class="video-info-grid">
                    <!-- Video Preview -->
                    <div class="video-preview-container">
                        <video class="video-preview" 
                               src="https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/1.mp4"
                               autoplay controls loop muted
                               aria-label="완성된 광고 영상">
                        </video>
                        
                        <div class="video-controls">
                            <button class="btn btn-primary" onclick="downloadVideo()" 
                                    aria-label="영상 다운로드">다운로드</button>
                            <button class="btn btn-outline" onclick="shareVideo()" 
                                    aria-label="영상 공유">공유하기</button>
                        </div>
                    </div>
                    
                    <!-- Video Information -->
                    <div class="video-info-panel">
                        <div class="video-info">
                            <h3>영상 정보</h3>
                            <div class="video-info-item">
                                <strong>제품:</strong> <span id="finalProduct">-</span>
                            </div>
                            <div class="video-info-item">
                                <strong>타겟:</strong> <span id="finalTarget">-</span>
                            </div>
                            <div class="video-info-item">
                                <strong>스타일:</strong> <span id="finalStyle">-</span>
                            </div>
                            <div class="video-info-item">
                                <strong>형식:</strong> <span id="finalFormat">-</span>
                            </div>
                            <div class="video-info-item">
                                <strong>길이:</strong> <span id="finalDuration">-</span>초
                            </div>
                        </div>
                        
                        <div class="satisfaction-section">
                            <h3>만족도 평가</h3>
                            <p class="mb-2">이 영상을 광고로 사용하시겠습니까?</p>
                            
                            <div class="satisfaction-buttons">
                                <button class="btn btn-primary" onclick="satisfiedWithVideo()" 
                                        aria-label="영상에 만족함">👍 만족합니다</button>
                                <button class="btn btn-outline" onclick="downloadVideo()" 
                                        aria-label="영상 다운로드">💾 다운로드</button>
                            </div>
                            
                            <p class="satisfaction-note">
                                더 세밀한 편집이 필요하시다면 
                                <a href="#" aria-label="추천 편집 앱 확인">추천 편집 앱</a>을 
                                확인해보세요.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Edit Section (Visible by Default) -->
                <div id="advancedEditSection" class="advanced-edit-section">
                    <h3>🎨 고급 편집 모드</h3>
                    <p class="mb-3">영상의 특정 부분을 수정하거나 새로운 이미지로 다시 제작할 수 있습니다.</p>
                    
                    <div class="edit-options-grid">
                        <!-- Regenerate Video Option -->
                        <div class="card edit-option-card" onclick="selectEditOption('regenerate-video')" 
                             role="button" tabindex="0" onkeydown="if(event.key==='Enter') selectEditOption('regenerate-video')"
                             aria-label="영상만 다시 제작">
                            <div class="icon">🎬</div>
                            <h4>영상만 다시 제작</h4>
                            <p>같은 이미지로 영상 스타일이나 편집을 변경</p>
                            <div class="cost-badge low">비용: 5 토큰</div>
                        </div>
                        
                        <!-- Regenerate with New Images Option -->
                        <div class="card edit-option-card" onclick="selectEditOption('regenerate-image')" 
                             role="button" tabindex="0" onkeydown="if(event.key==='Enter') selectEditOption('regenerate-image')"
                             aria-label="새 이미지로 제작">
                            <div class="icon">🖼️</div>
                            <h4>새 이미지로 제작</h4>
                            <p>이미지 선택부터 다시 시작</p>
                            <div class="cost-badge medium">비용: 10 토큰</div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-3">
                        <button class="btn btn-outline" onclick="hideAdvancedEdit()" 
                                aria-label="고급 편집 모드 닫기">취소</button>
                    </div>
                </div>
                
                
                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="startOver()" 
                            aria-label="새 광고 만들기">새 광고 만들기</button>
                    <button class="btn btn-primary" onclick="goToLibrary()" 
                            aria-label="내 광고 보관함으로 이동">내 광고 보관함</button>
                </div>
            </section>

            <!-- Step 8: Video Cut Selection -->
            <section class="step-content" id="step8">
                <div class="progress-indicator">
                    <div class="progress-text">8/8 단계 - 영상 컷 선택</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                </div>
                
                <h1 class="heading">🎬 영상 컷 선택 및 재생성</h1>
                <p class="mb-4">각 컷을 검토하고 기존 컷을 유지하거나 새로 생성할 수 있습니다. 비용은 실제 재생성되는 컷의 수에 따라 결정됩니다.</p>
                
                <!-- Cost Summary -->
                <div class="cost-summary-card">
                    <h4>💰 예상 비용</h4>
                    <div class="cost-breakdown">
                        <span>재생성할 컷: <span id="regenerationCount">0</span>개</span>
                        <span>예상 비용: <span id="totalCost">0</span> 토큰</span>
                    </div>
                </div>
                
                <!-- Video Cut 1: Opening -->
                <div class="video-cut-container" data-cut="cut1">
                    <h4 class="cut-title">컷 1: 오프닝 장면</h4>
                    <div class="video-cut-preview">
                        <video class="cut-video" muted loop preload="metadata">
                            <source src="https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/1.mp4" type="video/mp4">
                            <div class="video-placeholder">
                                <i class="video-icon">🎬</i>
                                <p>비디오를 로드하는 중...</p>
                            </div>
                        </video>
                        <div class="cut-duration">0-5초</div>
                        <div class="cut-status" id="cut1Status">기존 컷 유지</div>
                    </div>
                    <div class="cut-options">
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="cut1Option" value="keep" checked onchange="handleCutOptionChange('cut1', 'keep')">
                                <span class="option-text">🔒 기존 컷 유지</span>
                                <span class="option-cost">무료</span>
                            </label>
                            <label class="option-label">
                                <input type="radio" name="cut1Option" value="regenerate" onchange="handleCutOptionChange('cut1', 'regenerate')">
                                <span class="option-text">🔄 새로 생성</span>
                                <span class="option-cost">5 토큰</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Video Cut 2: Product Demo -->
                <div class="video-cut-container" data-cut="cut2">
                    <h4 class="cut-title">컷 2: 제품 소개 장면</h4>
                    <div class="video-cut-preview">
                        <video class="cut-video" muted loop preload="metadata">
                            <source src="https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/apple_demo.mp4" type="video/mp4">
                            <div class="video-placeholder">
                                <i class="video-icon">🎬</i>
                                <p>비디오를 로드하는 중...</p>
                            </div>
                        </video>
                        <div class="cut-duration">5-10초</div>
                        <div class="cut-status" id="cut2Status">기존 컷 유지</div>
                    </div>
                    <div class="cut-options">
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="cut2Option" value="keep" checked onchange="handleCutOptionChange('cut2', 'keep')">
                                <span class="option-text">🔒 기존 컷 유지</span>
                                <span class="option-cost">무료</span>
                            </label>
                            <label class="option-label">
                                <input type="radio" name="cut2Option" value="regenerate" onchange="handleCutOptionChange('cut2', 'regenerate')">
                                <span class="option-text">🔄 새로 생성</span>
                                <span class="option-cost">5 토큰</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Video Cut 3: Closing -->
                <div class="video-cut-container" data-cut="cut3">
                    <h4 class="cut-title">컷 3: 마무리 장면</h4>
                    <div class="video-cut-preview">
                        <video class="cut-video" muted loop preload="metadata">
                            <source src="https://jpjpkimjp.github.io/xbrush_movie_MVP1/images/1.mp4" type="video/mp4">
                            <div class="video-placeholder">
                                <i class="video-icon">🎬</i>
                                <p>비디오를 로드하는 중...</p>
                            </div>
                        </video>
                        <div class="cut-duration">10-15초</div>
                        <div class="cut-status" id="cut3Status">기존 컷 유지</div>
                    </div>
                    <div class="cut-options">
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="cut3Option" value="keep" checked onchange="handleCutOptionChange('cut3', 'keep')">
                                <span class="option-text">🔒 기존 컷 유지</span>
                                <span class="option-cost">무료</span>
                            </label>
                            <label class="option-label">
                                <input type="radio" name="cut3Option" value="regenerate" onchange="handleCutOptionChange('cut3', 'regenerate')">
                                <span class="option-text">🔄 새로 생성</span>
                                <span class="option-cost">5 토큰</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="video-cut-actions">
                    <button class="btn btn-outline" onclick="goToStep(7)" 
                            aria-label="이전 단계로 돌아가기">이전 단계</button>
                    <button class="btn btn-outline" onclick="regenerateAllCuts()" 
                            style="border-color: #e53e3e; color: #e53e3e;"
                            aria-label="전체 컷 다시 제작">🔄 전체 컷 다시 제작 (15 토큰)</button>
                    <button class="btn btn-primary" id="proceedWithCuts" onclick="proceedWithSelectedCuts()" 
                            aria-label="선택된 설정으로 최종 영상 제작">
                        <span id="proceedButtonText">영상 제작 진행</span>
                        <span id="proceedButtonCost">(0 토큰)</span>
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- JavaScript Files -->
    <script src="constants.js"></script>
    <script src="utils.js"></script>
    <script src="db.js"></script>
    <script src="app.js"></script>
</body>
</html>